name: "Run Python Unittests"
description: "Set up Python, install dependencies, and run unittests"

inputs:
  test-command:
    description: "Command to run unittests"
    required: false
    default: "python -m unittest discover tests"
  python-version:
    description: "Python version to use"
    required: false
    default: "3.9"
  working-directory:
    description: "Project root directory"
    required: false
    default: "."


runs:
  using: "composite"
  steps:
    # This job sets up Python and runs unit tests
    - uses: KaranbirSinghAhluwalia/platform-github-actions/.github/actions/python/setup@testing
      with:
        python-version: ${{ inputs.python-version }}
        working-directory: ${{ inputs.working-directory }}

    # This step will execute the unittest command
    - name: Run unit tests
      continue-on-error: true
      run: |
        ${{ inputs.test-command }}
      shell: bash